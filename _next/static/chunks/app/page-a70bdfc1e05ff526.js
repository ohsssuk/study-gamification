(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7979:function(e,t,a){Promise.resolve().then(a.bind(a,8549))},8549:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var n,c,s,l,o,r,i,m,u,d,f=a(7437),g=a(2265);(n=r||(r={})).None="none",n.Back="back",n.All="all",(c=i||(i={})).User="user",c.Coo="coo",(s=m||(m={})).Start="start",s.Complete="complete",s.InProgress="inProgress",(l=u||(u={})).Loading="loading",l.Intro="intro",l.makeAka="makeAka",l.Story="story",l.Touch="touch",l.TutorialEnd="tutorialEnd",l.Main="main";var h=a(9099),x=a(9291);let j=(0,h.Ue)(e=>({scenario:[],finishCallback:()=>{},createDialog:function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return e({scenario:t,finishCallback:a})},destoryDialog:()=>e({scenario:[],finishCallback:()=>{}})})),p=(0,h.Ue)()((0,x.tJ)(e=>({fullCount:4,actCount:0,actTotalCount:0,makeAvailableSeconds:0,makerAka:"",timer:null,incrementActCount:()=>e(e=>({actCount:e.actCount+2,actTotalCount:e.actTotalCount+2,makeAvailableSeconds:5})),setCompleteAct:()=>e(e=>({actCount:e.actTotalCount%e.fullCount})),setMakerAka:t=>e({makerAka:t}),setTimer:()=>e(t=>{t.timer&&clearInterval(t.timer);let a=setInterval(()=>{e(e=>e.makeAvailableSeconds>0?{makeAvailableSeconds:e.makeAvailableSeconds-1}:(clearInterval(a),{timer:null}))},1e3);return{timer:a}})}),{name:"info-storage"})),N=e=>[{text:"안녕? 나는 쿠냥이야. 너의 이름은 뭐야? (대화창을 클릭하여 진행할 수 있습니다)",profileName:"coo_normal",callback:()=>{e(i.Coo)}},{text:"나?! 내 이름은...",profileName:"user_close",callback:()=>{e(i.User)}}],v=(e,t)=>[{text:"".concat(t,"! 너 꾹꾹이 할 줄 알지? 찹쌀떡에 넣을 딸기잼 만드는 것 좀 도와줄래?"),profileName:"coo_normal",callback:()=>{e(i.Coo)}},{text:"뭐? 내가 왜! 나 바쁜 고양이거든?!",profileName:"user_cynic",callback:()=>{e(i.User)}},{text:"내가 지금 급해서 그래! 도와주면 수고비도 줄게!",profileName:"coo_normal",callback:()=>{e(i.Coo)}},{text:"수고비...? 크흠! 그럼 뭐 한번 도와줘 볼까!",profileName:"user_normal",callback:()=>{e(i.User)}}],_=()=>[{text:"그럼 이제 [딸기잼 만들기] 버튼을 눌러 네 꾹꾹이 실력을 보여줘!",profileName:"coo_normal",isLast:!0}],b=()=>[{text:"역시 내 눈은 틀리지 않았어! 앞으로도 계속 딸기잼을 만들어줄래?",profileName:"coo_normal"},{text:"싫어! 발바닥 젤리가 불타는 줄 알았다구...!",profileName:"user_cynic"},{text:"하핫...! 꾹꾹이 후엔 발바닥이 아플 테니 열 식히는 시간을 꼭 가지도록 해!",profileName:"coo_normal"},{text:"쉬는 동안 쿠캣을 둘러보고 와도 좋고!",profileName:"coo_normal"},{text:"(뭔가 단단히 잘못 걸린 것 같다...!)",profileName:"user_cynic"},{text:"딸기잼을 4번 만들면 한 병이 완성돼. 그때마다 최대 3만원의 적립금을 수고비로 줄게!",profileName:"coo_normal"},{text:"그렇다면...할만 할지도...?",profileName:"user_cynic"},{text:"하하하! 그럴 줄 알았어! 그럼 앞으로 잘 부탁해!",profileName:"coo_normal",isLast:!0}],y=e=>[{text:["난 찹쌀떡을 팔아서 부자가 될거야!","뭐해? 어서 실력 발휘 좀 해보라구!","딸기가 싱싱한 게 아주 맛있는 잼이 되겠는걸?","자, 거의 다 왔어! 마지막으로 힘내보자!","오오, 드디어...!"][e],profileName:"coo_normal",isLast:!0}];var k=a(6648);function C(e){let{actCount:t=0,type:a=r.All}=e,n="calc(".concat(-100+25*t,"%").concat(1===t?"":" - 2px",")");return(0,f.jsxs)("nav",{id:"coonyang_gnb",children:[a!==r.None&&(0,f.jsx)("button",{className:"back gnb-item",children:"뒤로 가기"}),a===r.All&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"gage-wrap gnb-item",children:(0,f.jsxs)("div",{className:"gage",children:[(0,f.jsx)(k.default,{className:"gage-icon",width:44,height:46,src:"/images/coonyang/gnb/gage_icon.png",alt:"아이콘 이미지"}),(0,f.jsx)("div",{className:"gage-bar",children:(0,f.jsx)("div",{className:"level",style:{transform:"translateX(".concat(n,")")}})})]})}),(0,f.jsx)("button",{className:"info gnb-item",children:"설명 보기"})]})]})}function w(e){let{children:t}=e;return(0,f.jsx)("div",{id:"coonyang",className:"full-screen",children:t})}function S(e){let{}=e;return(0,f.jsx)("div",{id:"init_loading",className:"loading-state",children:(0,f.jsx)("h1",{className:"logo",children:"쿠냥이의 부탁"})})}function T(e){let{text:t="젤리 식히는 중..."}=e;return(0,f.jsx)("div",{id:"during_loading",className:"loading-state",children:(0,f.jsxs)("div",{className:"foot-loading",children:[(0,f.jsx)("img",{src:"/imgages/coonyang/foot.png",alt:t}),t?(0,f.jsx)("p",{children:t}):null]})})}function A(e){let{children:t,viewType:a=1}=e;return(0,f.jsx)("div",{id:"coonyang_view",className:"type-".concat(a),children:t})}function E(e){let{makerAka:t,callback:a}=e,{createDialog:n,destoryDialog:c}=j(),[s,l]=(0,g.useState)(0),[o,r]=(0,g.useState)(m.Start),i=(0,g.useRef)(null),u=(0,g.useRef)(null);(0,g.useEffect)(()=>{0===s?n([{text:"뭐 하는 거야? 어서 딸기에 꾹꾹이 진행시켜!",profileName:"coo_normal",isLast:!0}]):1===s?(n([{text:"조금 더 빨리! 딸기가 산더미처럼 쌓여있다구!",profileName:"coo_normal",isLast:!0}]),r(m.InProgress)):5===s?n([{text:"아직 부족해! 발바닥 젤리에 불이 날 때까지 누르란 말이야!",profileName:"coo_normal",isLast:!0}]):10===s?n([{text:"조금만 더...! 거의 다왔어 ".concat(t," 냥!"),profileName:"coo_normal",isLast:!0}]):15===s&&(n([{text:"아... 나의 발바닥 젤리에 불이 나는군...!",profileName:"user_close",isLast:!0}]),r(m.Complete),setTimeout(()=>{console.log("미션 완료: TEST를 위해 완료횟수를 2로 조정"),a()},2500))},[s,n]);let d=()=>{l(e=>e+1)},h=(e,t)=>{if(o===m.Complete)return;u.current&&(u.current.classList.add("touching"),setTimeout(()=>{var e;null===(e=u.current)||void 0===e||e.classList.remove("touching")},500));let a=[e,t],n=document.createElement("div");function c(){return Math.floor(100*Math.random())-50}n.className="touch-effect",n.style.left="".concat(a[0],"px"),n.style.top="".concat(a[1],"px"),n.style.transform="translateY(".concat(c()-50,"%) translateX(").concat(c()-50,"%) rotate(").concat(c(),"deg)"),i.current&&i.current.appendChild(n),setTimeout(()=>{i.current&&i.current.removeChild(n)},2e3)};return(0,f.jsx)(A,{viewType:3,children:(0,f.jsxs)("div",{ref:i,className:"touch-wrap",children:[(0,f.jsx)("img",{ref:u,className:"berry-img",src:"/images/coonyang/berry_xl.png",alt:"딸기 클릭"}),(0,f.jsx)("button",{onClick:e=>{d(),h(e.nativeEvent.offsetX,e.nativeEvent.offsetY)},className:"touch-berry",type:"button",children:"딸기 클릭(꾹꾹이)"}),o!==m.InProgress&&(0,f.jsxs)("div",{className:"touch-state-banner ".concat(o),children:["$",o===m.Start?"터치":"완료","$",o===m.Complete&&(0,f.jsxs)("div",{className:"twinkling-effect",children:[(0,f.jsx)("img",{className:"effect effect-1",src:"/images/coonyang/effect/effect_white_1.png",alt:""}),(0,f.jsx)("img",{className:"effect effect-2",src:"/images/coonyang/effect/effect_white_2.png",alt:""}),(0,f.jsx)("img",{className:"effect effect-3",src:"/images/coonyang/effect/effect_white_3.png",alt:""})]})]})]})})}function I(e){let{scenario:t=[],finishCallback:a=()=>{}}=e,n=(0,g.useRef)(null),c=(0,g.useRef)(null),[s,l]=(0,g.useState)(0),[o,r]=(0,g.useState)("coo_normal"),[i,m]=(0,g.useState)(0),[u,d]=(0,g.useState)(!1);(0,g.useEffect)(()=>{j()},[s]),(0,g.useEffect)(()=>()=>{c.current&&clearInterval(c.current)},[]);let h=()=>{if(!n.current){c.current&&clearInterval(c.current);return}m(1);let{text:e}=t[s],a=0;n.current.textContent="",c.current&&clearInterval(c.current),c.current=setInterval(()=>{a<e.length?n.current&&(n.current.textContent+=e.charAt(a)):(clearInterval(c.current),m(2)),a++},50)},x=()=>{c.current&&clearInterval(c.current),n.current&&(n.current.textContent=t[s].text),m(2)},j=()=>{if(0===t.length||!t[s])return;let{profileName:e,text:n,isLast:c=!1,callback:o=()=>{}}=t[s];if(r(e),d(c),o(),0===i)h();else if(1===i)x();else{if(s===t.length-1){a();return}l(e=>e+1),m(0)}};return 0===t.length?null:(0,f.jsxs)("div",{id:"coonyang_dialog",className:"dialog-box",children:[(0,f.jsxs)("div",{className:"dialog-content",children:[(0,f.jsx)("div",{className:"dialog-profile",children:(0,f.jsx)(k.default,{src:"/images/coonyang/dialog/".concat(o,".png"),alt:"고양이 얼굴",width:117,height:117},o)}),(0,f.jsx)("div",{ref:n,className:"dialog-text"})]}),(0,f.jsx)("button",{onClick:j,className:"dialog-next ".concat(2!==i||u?"":"to-next"),children:"다음"}),u&&(0,f.jsx)(f.Fragment,{})]})}function L(e){let{actCount:t=0,actTotalCount:a=0,fullCount:n=4,nowStep:c=u.Main,makeAvailableSeconds:s=10,callback:l=()=>{}}=e;return t>n&&(t=n),(0,f.jsx)(A,{children:(0,f.jsx)("div",{className:"jam-mission",children:(0,f.jsxs)("div",{children:[0===a&&c!==u.TutorialEnd&&(0,f.jsx)("div",{className:"tutorial-dimmed"}),(0,f.jsxs)("div",{className:"jam",children:[(0,f.jsx)(k.default,{className:"bottle",src:"/images/coonyang/jam_lv_".concat(t,".png"),alt:"잼 ".concat(t,"/").concat(n),width:173,height:250}),(0,f.jsx)(k.default,{className:"deco",src:"/images/coonyang/berry_small.png",alt:"",width:184,height:160})]}),(0,f.jsx)("div",{className:"cta ".concat(0===a?"trace":""),children:(0,f.jsx)("button",{className:"to-make-jam",type:"button",disabled:s>0,onClick:l,children:s>0?(0,f.jsxs)(f.Fragment,{children:["젤리 열 식히는 중 ",(0,f.jsx)("br",{})," ",(0,f.jsx)("span",{className:"waiting-time",children:function(e){let t=String(Math.floor(e/3600)).padStart(2,"0"),a=String(Math.floor(e%3600/60)).padStart(2,"0"),n=String(e%60).padStart(2,"0");return"".concat(t,":").concat(a,":").concat(n)}(s)})]}):"딸기잼 만들기"})})]})})})}function M(e){let{speechingNow:t=null}=e;return(0,f.jsx)(A,{children:(0,f.jsxs)("div",{className:"cat-conversation",children:[(0,f.jsxs)("div",{className:"row row-speech",children:[(0,f.jsx)("div",{className:"col",children:(0,f.jsx)(k.default,{id:"coo_speech",src:"/images/coonyang/conversation/speech_shout.png",alt:"말풍선 이미지",width:180,height:96})}),(0,f.jsx)("div",{className:"col",children:(0,f.jsx)(k.default,{id:"user_speech",src:"/images/coonyang/conversation/speech_normal.png",alt:"말풍선 이미지",width:120,height:96})})]}),(0,f.jsxs)("div",{className:"row row-cat",children:[(0,f.jsx)("div",{className:"col",children:(0,f.jsx)(k.default,{id:"coo_face",src:"/images/coonyang/conversation/cookat_face_side.png",alt:"고양이 얼굴",width:100,height:100,className:t===i.Coo?"speeching-now":""})}),(0,f.jsx)("div",{className:"col",children:(0,f.jsx)(k.default,{id:"user_face",src:"/images/coonyang/conversation/user_face_side.png",alt:"고양이 얼굴",width:100,height:100,className:t===i.User?"speeching-now":""})})]})]})})}function F(e){let{callback:t}=e,[a,n]=(0,g.useState)(0),c=["행복한","멋진","귀여운","똑똑한","용감한"];return(0,f.jsx)(A,{children:(0,f.jsxs)("div",{className:"create-user-name-form",children:[(0,f.jsxs)("div",{className:"my-name-text",children:["내 이름은 바로",(0,f.jsx)("br",{}),c[a]," 냥이야!"]}),(0,f.jsx)("img",{className:"face-icon speeching-now",src:"/images/coonyang/conversation/user_face_side.png",alt:"고양이 얼굴"}),(0,f.jsxs)("div",{className:"cta",children:[(0,f.jsx)("button",{className:"select",onClick:()=>{t(c[a]+" 냥")},children:"마음에 들어요"}),(0,f.jsx)("button",{className:"other",onClick:()=>{n(e=>(e+1)%c.length)},children:"랜덤 추천받기"})]})]})})}function P(e){let{pickIndex:t=0,callback:a=()=>{}}=e,n=(0,g.useRef)(null),c=[{amount:10,text:(0,f.jsxs)(f.Fragment,{children:["도와줘서 고마워…!",(0,f.jsx)("br",{}),"여기 수고비를 받아줘!"]})},{amount:100,text:(0,f.jsxs)(f.Fragment,{children:["이제 찹쌀떡을 만들 수 있겠군!",(0,f.jsx)("br",{}),"다음에도 도와줄 거지?"]})},{amount:500,text:(0,f.jsxs)(f.Fragment,{children:["야호, 맛있는 잼이 완성됐어!",(0,f.jsx)("br",{}),"너 정말 꾹꾹이에 소질 있구나?!"]})},{amount:1e3,text:(0,f.jsxs)(f.Fragment,{children:["이렇게 맛있는 잼은 처음이야!",(0,f.jsx)("br",{}),"너 발바닥에 설탕 발랐니?"]})},{amount:3e4,text:(0,f.jsxs)(f.Fragment,{children:["이건… 정말 환상의 맛이야…!",(0,f.jsx)("br",{}),"제발 다음에 또 만들어줘!!"]})}],s=(e,t)=>{let a=[],n=0;for(let s=1;s<=t;s++)c.forEach((c,l)=>{n++,a.push((0,f.jsxs)("div",{className:"item ".concat(s===t&&l===e?"pick":""),children:[(0,f.jsx)("span",{children:c.amount.toLocaleString()}),(0,f.jsx)("span",{children:"원"})]},"".concat(s,"-").concat(n)))});return a},l=(0,g.useMemo)(()=>s(t,5),[t]);return(0,g.useEffect)(()=>{console.log("완료 보상 팝업 오픈: ".concat(c[t].amount,"원 당첨"));let e=n.current;if(e){let t=e.querySelector(".item.pick");if(t){let a=-1*t.offsetTop;e.style.transform="translateY(".concat(a,"px)")}}},[t]),(0,f.jsxs)("div",{id:"coonyang_reward_popup",className:"reward-full-popup",children:[(0,f.jsx)("div",{className:"head",children:(0,f.jsx)("p",{children:c[t].text})}),(0,f.jsx)("div",{className:"content",children:(0,f.jsxs)("div",{children:[(0,f.jsxs)("h2",{children:["적립금 ",c[t].amount.toLocaleString(),"원 획득"]}),(0,f.jsx)("img",{className:"label-img",src:"/images/coonyang/jam_label.png",alt:"잼 완성"}),(0,f.jsxs)("div",{className:"shining-jam-bottle",children:[(0,f.jsx)("img",{className:"rotated-shine",src:"/images/coonyang/rotated_shine_4x.png",alt:"후광 효과"}),(0,f.jsx)("img",{className:"jam-img",src:"/images/coonyang/jam_lv_4.png",alt:"잼 병"}),(0,f.jsxs)("div",{className:"shining-effect",children:[(0,f.jsx)("img",{className:"effect effect-1",src:"/images/coonyang/effect/effect_yellow_1.png",alt:""}),(0,f.jsx)("img",{className:"effect effect-2",src:"/images/coonyang/effect/effect_yellow_3.png",alt:""}),(0,f.jsx)("img",{className:"effect effect-3",src:"/images/coonyang/effect/effect_yellow_2.png",alt:""})]})]}),(0,f.jsxs)("div",{className:"reward-point",children:[(0,f.jsx)("img",{className:"point-img",src:"/images/coonyang/gnb/gage_icon.png",alt:"포인트"}),(0,f.jsx)("div",{className:"point-slot",children:(0,f.jsx)("div",{className:"slot",ref:n,children:l})})]}),(0,f.jsx)("div",{className:"cta",children:(0,f.jsx)("button",{onClick:()=>{a()},children:"적립금 받기"})})]})})]})}function R(e){return new Promise(t=>{setTimeout(t,e)})}function U(){let{scenario:e,finishCallback:t,createDialog:a,destoryDialog:n}=j(),{actCount:c,actTotalCount:s,fullCount:l,makeAvailableSeconds:o,makerAka:m,incrementActCount:d,setCompleteAct:h,setMakerAka:x,setTimer:k}=p(),[A,U]=(0,g.useState)(0),[X,Y]=(0,g.useState)(u.Loading),[D,O]=(0,g.useState)(!1),[$,q]=(0,g.useState)(i.Coo),[B,J]=(0,g.useState)(!1),[z,G]=(0,g.useState)(r.All),[H,K]=(0,g.useState)(0),Q=(0,g.useRef)();(0,g.useEffect)(()=>{U(e=>e+1)},[e]),(0,g.useEffect)(()=>{0===s?Y(u.Intro):Y(u.Main)},[s,c]),(0,g.useEffect)(()=>{(async()=>{let e=Q.current;console.log("직전 단계:".concat(Q.current),"진행 단계:".concat(X),"현재 잼 레벨:".concat(c),"누적 완료 횟수:".concat(s)),X===u.Intro?a(N(q),()=>{n(),Y(u.makeAka)}):X===u.Story?a(v(q,m),()=>{Y(u.Main)}):X===u.makeAka?n():X===u.Touch?a(_()):(k(),e===u.Touch&&await V(1200),e===u.Touch&&2===s?a(b()):0===s?a(_()):a(y(c)),c>=l&&(await R(1500),O(()=>(K(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Math.floor(Math.random()*(t-e+1))+e}(0,4)),!0)),h()))})(),Q.current=X},[X]);let V=async e=>{J(!0),await R(e),J(!1)};return(0,f.jsxs)(w,{children:[D&&(0,f.jsx)(P,{callback:()=>{O(!1),n(),a(y(c))},pickIndex:H}),B&&(0,f.jsx)(T,{}),(0,f.jsx)(C,{actCount:c,type:z}),X===u.Loading?(0,f.jsx)(S,{}):X===u.Intro?(0,f.jsx)(M,{speechingNow:$}):X===u.Story?(0,f.jsx)(M,{speechingNow:$}):X===u.makeAka?(0,f.jsx)(F,{callback:e=>{x(e),Y(u.Story)}}):X===u.Touch?(0,f.jsx)(E,{makerAka:m,callback:()=>{d()}}):X===u.Main?(0,f.jsx)(L,{actCount:c,actTotalCount:s,fullCount:l,nowStep:X,makeAvailableSeconds:o,callback:()=>Y(u.Touch)}):null,(0,f.jsx)(I,{scenario:e,finishCallback:t},A)]})}(o=d||(d={}))[o.Ready=0]="Ready",o[o.Progress=1]="Progress",o[o.End=2]="End",a(2103)},2103:function(){}},function(e){e.O(0,[405,979,971,23,744],function(){return e(e.s=7979)}),_N_E=e.O()}]);