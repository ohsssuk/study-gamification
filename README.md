## 게이미피케이션 기능 마이그레이션

## 프로젝트 개요

자사 `jQuery` 기반의 서비스를 `Next.14(React.18)`, `Zustand`, `TypeScript`를 사용하여 마이그레이션.

## 주요기능

(첫 시작시)[스토리] - (첫 시작시)[닉네임 정하기] - (첫 시작시)[튜토리얼] - [터치 미션] - [메인] - (일정 횟수 완료시)[보상 팝업] - 반복

```bash
# dev
npm run dev
# build
npm run build
# prod
npm run start
```
-------------------------
## 컴포넌트

- **스타일 관련**
  
  - **Wrap**: 관련 컴포넌트를 감싸는 래퍼
  - **View**: 각 화면별 변동되는 스타일을 적용하기 위해 변동되는 하위 컴포넌트에 항상 포함

- **상위**
  - **Page**: 비지니스 로직이 위치하고 모든 상태를 전달하는 상위 구조

- **독립 구성 요소**
  
  - **Header**: 현재 잼 레벨과 상태를 표시하는 헤더 컴포넌트
  - **Dialog**: 대화 시나리오를 렌더링하는 컴포넌트
    
    - 타이핑 애니메이션 효과: state가 아닌 DOM 조작으로 처리하기 때문에 컴포넌트 내에 기능이 위치 
    - 시나리오에 진행에 따라 상태를 계속 업데이트
  - **Loading**: 진행중 로딩 표시 컴포넌트
  - **InitLoading**: 초기 1회 로딩 표시 컴포넌트
   
- **진행에 따라 변동되는 요소**
  
  - **Touch**: 터치 미션을 수행하는 컴포넌트
    
    - 클릭 이벤트는 자체적으로 제어하고 완료, 미완료의 여부만 상위 컴포넌트로 전달
  - **RewardPopup**: 미션 완료 후 보상을 표시하는 팝업 컴포넌트
    - 슬롯 애니메이션 효과 구현
  - **Conversation**: 대화 화면 컴포넌트
  - **MakeAka**: 닉네임 설정 화면
  - **Main**: 기본 화면

-----------------------
## 스토어

- **`useDialogStore`**: 대화 모듈 관련 상태를 관리
  
  - 시나리오(대화록)이 변경될때마다 컴포넌트를 재생성하여 타이핑 효과 시작 
- **`useInfoStore`**: 사용자 기록 관리
  - API로 조회한 DB데이터를 초기에 로드하여 저장하고 모든 컴포넌트에서 사용하는 것이 일반적이지만 프로타타입을 위해 미션 수행과 관련 데이터 관리를 localstorage에서 하도록 수정  
-----------------------
**동작**

1. `useInfoStore` 조회하여 미션 수행 기록이 있는지 확인
2. `nowStep` 의 상태 변경에 따라 전체적인 비지니스 로직을 실행
3. 비지니스 로직에는 Dialog 스토어 업데이트를 통한 대화창 생성과 콜백 함수 지정 포함







